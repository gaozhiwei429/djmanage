$(function(){HYD.DIY=HYD.DIY?HYD.DIY:{},HYD.DIY.Unit=HYD.DIY.Unit?HYD.DIY.Unit:{},HYD.DIY.PModules=HYD.DIY.PModules?HYD.DIY.PModules:[],HYD.DIY.LModules=HYD.DIY.LModules?HYD.DIY.LModules:[];var t=$("#diy-contain"),e=$("#diy-ctrl"),n=0,i=0,o=0,a=0,l=0;HYD.DIY.constant={diyoffset:$(".diy").offset()},HYD.DIY.getTimestamp=function(){var t=new Date;return""+t.getFullYear()+parseInt(t.getMonth()+1)+t.getDate()+t.getHours()+t.getMinutes()+t.getSeconds()+t.getMilliseconds()};var c='<input type="hidden" class="stepType" value="">',d='<input type="hidden" class="stepTypeIndex" value="">';$("body").append(c),$("body").append(d),HYD.DIY.add=function(e,c,d,s){if(23==e.type&&n<=1&&n++,n>1&&23==e.type)return void $.jBox.show({title:"注意！",content:"整个装修页只能设置一个滑动导航置顶组件",btnOK:{onBtnClick:function(t){$.jBox.close(t)}}});if(24==e.type&&i<=1&&i++,i>1&&24==e.type)return void $.jBox.show({title:"注意！",content:"整个装修页只能设置一个品牌街组件",btnOK:{onBtnClick:function(t){$.jBox.close(t)}}});if(25==e.type&&o<=1&&o++,o>1&&25==e.type)return void $.jBox.show({title:"注意！",content:"整个装修页只能设置一个附近门店组件",btnOK:{onBtnClick:function(t){$.jBox.close(t)}}});if(26==e.type&&a<=1&&a++,a>1&&26==e.type)return void $.jBox.show({title:"注意！",content:"整个装修页只能设置一个城市主页组件",btnOK:{onBtnClick:function(t){$.jBox.close(t)}}});if(28==e.type&&l<=1&&l++,l>1&&28==e.type)return void $.jBox.show({title:"注意！",content:"整个装修页只能设置一个秒杀活动组件",btnOK:{onBtnClick:function(t){$.jBox.close(t)}}});if(e.content||(e.content={}),"undefined"==typeof e.content.modulePadding&&(e.content.modulePadding=5),0==e.content.is_has_del)var r=$("#tpl_diy_conitem2").html();else var r=$("#tpl_diy_conitem").html();var p=_.template($("#tpl_diy_con_type"+e.type).html(),e),u=_.template(r,{html:p}),f=$(u);e.dom_conitem=f;var m=f.find(".diy-conitem-action"),h=(m.find(".j-edit"),m.find(".j-del")),g=$(".addmoduleTpl").length>0,v=$(".diy-actions .j-diy-addModule").length>0;g||v||m.each(function(){$(this).find(".diy-conitem-action-btns").css("visibility","hidden")}),m.click(function(){$(".diy-conitem-action").removeClass("selected"),$(this).addClass("selected"),HYD.DIY.edit(e)});var y="";e.draggable?(h.click(function(){return HYD.DIY.del(e),!1}),y=".drag"):(h.remove(),y=".nodrag"),1==d?t.find(y).find(".diy-conitem").eq(s).before(f):2==d?t.find(y).find(".diy-conitem").eq(s).after(f):t.find(y).append(f),c=!!c&&c,c&&m.click(),e.draggable?HYD.DIY.LModules.push(e):HYD.DIY.PModules.push(e);for(var k=HYD.DIY.LModules,x=HYD.DIY.LModules.length,b=0;b<x;b++)if(k[b].id==e.id){if(1==d){if(0==b)return;k.splice(b-1,0,e)}else k.splice(b+1,0,e);break}return!1},HYD.DIY.edit=function(t){t.content||(t.content={}),"undefined"==typeof t.content.modulePadding&&(t.content.modulePadding=5);var n=(t.dom_conitem,t.dom_conitem.parent());if(n.hasClass("drag")){var i=parseInt(n.siblings(".nodrag").find(".diy-conitem").length),o=parseInt(t.dom_conitem.index());o+=i}else if(n.hasClass("nodrag"))var o=t.dom_conitem.index();var a=t.dom_conitem.index();e.find(".diy-ctrl-item[data-origin='item']").remove();var l=$("#tpl_diy_ctrl").html(),c=_.template($("#tpl_diy_ctrl_type"+t.type).html(),t),d=_.template(l,{html:c}),s=$(d);s.find(".j-add-moudles").attr("data-index",a),s.find(".j-add-moudles").attr("data-index_move",o),e.append(s),HYD.DIY.repositionCtrl(t.dom_conitem,s),HYD.DIY.bindEvents(s,t),s.show().siblings(".diy-ctrl-item").hide();var r=window.location.href.toString().indexOf("Shop/edit_homepage");return r!=-1&&s.find(".j-add-moudles").show(),$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")}),!1},HYD.DIY.repositionCtrl=function(t,e){var n=t.offset().top;HYD.DIY.constant.diyoffset.top<=0&&(HYD.DIY.constant.diyoffset.top=$(".diy").offset().top);var i=n-HYD.DIY.constant.diyoffset.top;e.css("marginTop",i),$("html,body").animate({scrollTop:i},300)},HYD.DIY.del=function(t){if(t)return $.jBox.show({title:"提示",content:_.template($("#tpl_jbox_simple").html(),{content:"删除后将不可恢复，是否继续？"}),btnOK:{onBtnClick:function(c){$.jBox.close(c),n=0,i=0,o=0,a=0,l=0;for(var d=HYD.DIY.LModules,s=HYD.DIY.LModules.length,r=0;r<s;r++)if(d[r].id==t.id){d.splice(r,1);break}t.dom_conitem.remove(),e.find(".diy-ctrl-item[data-origin='item']").remove()}}}),!1},_QV_="%e6%9d%ad%e5%b7%9e%e5%90%af%e5%8d%9a%e7%a7%91%e6%8a%80%e6%9c%89%e9%99%90%e5%85%ac%e5%8f%b8%e7%89%88%e6%9d%83%e6%89%80%e6%9c%892018%2f02%2f02+0%3a00",HYD.DIY.bindEvents=function(t,e){HYD.DIY.Unit["event_type"+e.type](t,e)},HYD.DIY.reCalcPModulesSort=function(){_.each(HYD.DIY.LModules,function(t,e){t.sort=t.dom_conitem.index()})},HYD.DIY.Unit.getData=function(){HYD.DIY.reCalcPModulesSort();var t={page:{},PModules:{},LModules:{}};t.page.title=$(".j-pagetitle-ipt").val(),t.page.subtitle=$(".j-pagesubtitle-ipt").val(),t.page.view_pic=$(".j-view_pic-ipt").prop("src"),t.page.praise_num=$(".j-pagepraisenum").val(),t.page.pv_num=$(".j-pagepvnum").val(),t.PModules=HYD.DIY.PModules,t.page.goto_time=$(".j-gototime-ipt").val(),t.page.hasMargin=$(".j-page-hasMargin:checked").val()||1,t.page.backgroundColor=$("#j-page-backgroundColor").data("color")||"#f8f8f8";var e=[];console.log(t);for(var n=0;n<HYD.DIY.LModules.length;n++){var i=HYD.DIY.LModules[n];""!=i&&(e[i.sort]=i)}t.LModules=e;var i=$.extend(!0,{},t);return _.each(i.LModules,function(t){t.dom_conitem=null,t.dom_ctrl=null,t.ue=null}),_.each(i.PModules,function(t){t.dom_conitem=null,t.dom_ctrl=null,t.ue=null}),i},HYD.DIY.Unit.html_encode=function(t){var e="";return 0==t.length?"":(e=t.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/ /g,"&nbsp;"),e=e.replace(/\'/g,"&#39;"),e=e.replace(/\"/g,"&quot;"))},HYD.DIY.Unit.html_decode=function(t){var e="";return 0==t.length?"":(e=t.replace(/&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">"),e=e.replace(/&nbsp;/g," "),e=e.replace(/&#39;/g,"'"),e=e.replace(/&quot;/g,'"'))}}),$(function(){var t=function(t){var e=t;return e=e.replace(/\<script\>/,""),e=e.replace(/\<\/script\>/,"")};$(document).on("change",".input,.diy-videowebsite input",function(){var t=$(this).val();t=t.replace(/\</,"&lt;").replace(/\</,"&lt;"),t=t.replace(/\>/,"&gt;").replace(/\>/,"&gt;"),t=t.replace(/\//,"/"),$(this).val(t)}),HYD.DIY.Unit.event_type1=function(e,n){var i=n.dom_conitem,o=e;n.ue&&n.ue.destroy(),n.ue=UE.getEditor("editor"+n.id),n.ue.ready(function(){"&lt;p&gt;『富文本编辑器』&lt;/p&gt;"==n.content.fulltext?n.ue.setContent(HYD.DIY.Unit.html_decode("")):n.ue.setContent(HYD.DIY.Unit.html_decode(n.content.fulltext)),n.ue.focus(!0);var e=function(){var e=n.ue.getContent(),e=t(e);""==e&&(e="<p>『富文本编辑器』</p>"),i.find(".fulltext").html(e),n.content.fulltext=HYD.DIY.Unit.html_encode(e)};n.ue.addListener("selectionchange",e),n.ue.addListener("contentChange",e)}),o.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:n.content.modulePadding,slide:function(t,e){i.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),o.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,e){n.content.modulePadding=parseInt(e.value)}}),o.find("input[name='isPreview']").change(function(){var t=$("input[name='isPreview']:checked").val();0==t?t=!1:1==t&&(t=!0),n.content.isPreview=t})},HYD.DIY.Unit.event_type2=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type2").html(),a=$("#tpl_diy_ctrl_type2").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type2(i,e),t&&t()},c=function(){$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})};i.find("input[name='title'],input[name='direction']").change(function(){var t=$(this).val(),n=$(this).attr("name");e.content[n]=t,l(c)}),i.find(".droplist li").click(function(){$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(t,n){e.content.link=t.link,e.content.linkType=n,l()}})}),i.find("input[name='customlink']").change(function(){e.content.link=$(this).val()}),i.find("input[name='style']").change(function(){var t=$(this).val(),n=$(this).attr("name");e.content[n]=t,5==t?(e.content.titleColor="#1a1a1a",e.content.direction="left"):4==t||6==t?(e.content.titleColor="#1a1a1a",e.content.direction="center"):(e.content.titleColor="#333",e.content.direction="left"),l(c)}),i.find(".j-imgNav-cp").on("mouseenter",function(){var t=$(this).data("#color");$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,n,i){var n="#"+n;e.content.BackgroundColor=n,l()}})}),i.find(".j-textColor-bg").on("mouseenter",function(){var t=$(this).data("color");$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,n,i){var n="#"+n;e.content.bgColor=n,l()}})}),i.find(".j-textColor-cp").on("mouseenter",function(){var t=$(this).data("color");console.log(t),$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,n,i){var n="#"+n;e.content.titleColor=n,l()}})}),i.find("input[name='fontSize']").change(function(){var t=$(this).val();n.find(".slider-con").css("font-size",t+"px"),e.content.fontSize=t,l(c)}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}}),i.find(".j-slider2").slider({min:0,max:50,step:1,animate:"fast",value:e.content.levelPadding,slide:function(t,e){n.find(".modulePadding").css({"padding-left":e.value,"padding-right":e.value}),i.find(".j-ctrl-showheight2").text(e.value+"px")},stop:function(t,n){e.content.levelPadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type3=function(t,e){var n=e.dom_conitem,i=t;e.dom_ctrl=t;var o=function(){HYD.popbox.ModulePicker(function(t){n.find(".type3_custModule").text(t.title),i.find(".type3_custModule_ctrl").text(t.title),e.content=t})},a=function(){HYD.popbox.ModulePicker(function(t){n.find(".type3_custModule").text(t.title);var a=_.template($("#tpl_diy_ctrl_type3_modify").html(),{content:t}),l=$(a);l.filter(".j-btn-modify").click(o),i.find(".form-controls").empty().append(l),e.content=t})};i.find(".j-btn-add").click(a),i.find(".j-btn-modify").click(o)},HYD.DIY.Unit.event_type4=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type4").html(),a=$("#tpl_diy_ctrl_type4").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type4(i,e),t&&t()},c=function(){n.find(".mingoods,.biggoods,.b_mingoods").each(function(t,e){var n=$(this),i=n.find("img").width();n.find("img").closest("a").height(i)}),$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})},d=function(){n.find(".J_sliderGoods").each(function(){var t=$(this),e=t.find("li").width(),n=t.find("li").height();t.css({height:n}).find("li").css("width",e-2)})},s=function(t,e,n){for(var i=0;i<t.length;i++)if(t[i][e]==n)return i},r=function(t){var n=t.index(),i=t.data("item"),o=e.content.goodslist,a=s(o,"item_id",i),r=o.slice(a,a+1)[0];r&&(o.splice(a,1),o.splice(n,0,r)),l(c),d()};$(".goods-sortable").sortable({revert:!0,cursor:"move",placeholder:"goods-drag",items:"li.goods-item",opacity:.9,update:function(t,e){r(e.item)}}).disableSelection(),i.find("input[name='layout']").change(function(){var t=$(this).val();e.content.layout=t,l(c),d()}),i.find("input[name='goodstyle']").change(function(){var t=$(this).val();e.content.goodstyle=t,l(c)}),i.find("input[name='layoutstyles']").change(function(){var t=$(this).val();e.content.layoutstyles=t,l(c)}),i.find("input[name='cornerMark']").change(function(){var t=$(this).val();e.content.cornerMark=t,l(c)}),i.find("input[name='showName']").change(function(){var t=$(this).val();e.content.showName=t,l(c),d()}),i.find("input[name='showIco']").change(function(){var t=$(this).is(":checked");e.content.showIco=t,l(c)}),i.find("input[name='showPrice']").change(function(){var t=$(this).is(":checked");e.content.showPrice=t,l(c)}),i.find("input[name='priceBold']").change(function(){var t=$(this).val();e.content.priceBold=t,l(c)}),i.find("input[name='goodstxt']").change(function(){var t=$(this).val();n.find(".goods-btn a").text($(this).val()),e.content.goodstxt=t,l(c)}),i.find("input[name='multiLine']").change(function(){$(this).attr("checked")?($(this).attr("checked","true"),e.content.titleLine=1):($(this).removeAttr("checked"),e.content.titleLine=0),l(c)}),i.find(".j-delgoods").click(function(){var t=$(this).parents("li").index();return e.content.goodslist.splice(t,1),l(c),d(),!1}),i.find(".j-addgoods").click(function(){var t=i.find("input[name=goods_ids]").val().split(",");return 3==e.content.layout&&t.length>=20?HYD.hint("warning","您最多可以添加20个商品"):($.selectGoods({selectMod:2,selectIds:t,callback:function(t,n){e.content.goodslist=e.content.goodslist.concat(t),3==e.content.layout&&e.content.goodslist.length>20&&(e.content.goodslist.length=20,HYD.hint("warning","您最多可以添加20个商品")),l(c),d()}}),!1)}),i.find(".img-list>li .img-move-left").on("click",function(){var t=$(this),n=t.closest("li").index(),i=t.closest("li");if(0!=n){n--,t.closest("ul").find("li").eq(n).before(i);var o=e.content.goodslist.slice(n+1,n+2)[0];e.content.goodslist.splice(n+1,1),e.content.goodslist.splice(n,0,o),l(c),d()}return!1}),i.find(".img-list>li .img-move-right").on("click",function(){var t=$(this),n=t.closest("ul").find("li").length-1,i=t.closest("li").index(),o=t.closest("li");if(i!=n-1){i++,t.closest("ul").find("li").eq(i).after(o);var a=e.content.goodslist.slice(i,i+1)[0];e.content.goodslist.splice(i,1),e.content.goodslist.splice(i-1,0,a),l(c),d()}return!1}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type5=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type5").html(),a=$("#tpl_diy_ctrl_type5").html();e.dom_ctrl=t;var l=function(){var t=$(_.template(o,e));n.find(".members_con").remove().end().append(t);var l=$(_.template(a,e));i.empty().append(l),HYD.DIY.Unit.event_type5(i,e)},c=function(){n.find(".J_sliderGoods").each(function(){var t=$(this),e=t.find("li").width(),n=t.find("li").height();t.css({height:n}).find("li").css("width",e-2)})};i.find("input[name='layout']").change(function(){var t=$(this).val();e.content.layout=t,l(),c()}),i.find("input[name='goodstyle']").change(function(){var t=$(this).val();e.content.goodstyle=t,l()}),i.find("input[name='layoutstyles']").change(function(){var t=$(this).val();e.content.layoutstyles=t,l()}),i.find("input[name='showName']").change(function(){var t=$(this).is(":checked");e.content.showName=t,l()}),i.find("input[name='goodstxt']").change(function(){var t=$(this).val();n.find(".goods-btn a").text($(this).val()),e.content.goodstxt=t,l()}),i.find("input[name='showIco']").change(function(){var t=$(this).is(":checked");e.content.showIco=t,l()}),i.find("input[name='showPrice']").change(function(){var t=$(this).is(":checked");e.content.showPrice=t,l()}),i.find(".j-btn-add,.j-btn-modify").click(function(){HYD.popbox.GoodsAndGroupPicker("group",function(t){e.content.group=t,l(),c()})}),i.find('input[name="goodsize"]').change(function(t){var n=$(this),i=n.val();e.content.goodsize=i,l(),c()}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type6=function(t,e){var n=e.dom_conitem,i=t;$("#tpl_diy_con_type6").html(),$("#tpl_diy_ctrl_type6").html();e.dom_ctrl=t,i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type7=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type7").html(),a=$("#tpl_diy_ctrl_type7").html();e.dom_ctrl=t;var l=function(){var t=$(_.template(o,e));n.find(".members_con").remove().end().append(t);var l=$(_.template(a,e));i.empty().append(l),HYD.DIY.Unit.event_type7(i,e)};i.find("input[name='title']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].showtitle=$(this).val(),l()}),i.find(".droplist li").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(n,i){e.content.dataset[t].title=n.title,e.content.dataset[t].showtitle=n.title,e.content.dataset[t].link=n.link,e.content.dataset[t].linkType=i,l()}})}),i.find("input[name='customlink']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].link=$(this).val()}),i.find(".j-moveup").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();if(0!=t){var n=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t-1,0,n),l()}}),i.find(".j-movedown").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.dataset.length;if(t!=n-1){var i=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t+1,0,i),l()}}),i.find(".ctrl-item-list-add").click(function(){var t={linkType:0,link:"",title:"",showtitle:""};e.content.dataset.push(t),l()}),i.find(".j-del").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset.splice(t,1),l()}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type8=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type8").html(),a=$("#tpl_diy_ctrl_type8").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type8(i,e),t&&t()};i.find("input[name='layout'],input[name='layout1_style'],input[name='hasImgMargin']").change(function(){var t=($(this),$(this).attr("name"));e.content[t]=$(this).val(),l(),$("input[type='radio']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})}),i.find("input[name='title']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].showtitle=$(this).val(),l()}),i.find(".droplist li").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(n,i){e.content.dataset[t].title=n.title,e.content.dataset[t].showtitle=n.title,e.content.dataset[t].link=n.link,e.content.dataset[t].linkType=i,e.content.dataset[t].group_id=n.group_id,1==i&&(e.content.dataset[t].item_id=n.item_id),n.pic&&""!=n.pic&&(n.is_compress?e.content.dataset[t].pic=n.pic+"480x480":e.content.dataset[t].pic=n.pic),l()}})}),i.find(".j-selectimg").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.ImgPicker(function(n){var i=new Image;i.src=n[0];var o=i.width,a=i.height;e.content.dataset[t].pic=n[0],e.content.dataset[t].picWidth=o,e.content.dataset[t].picHeight=a,l()})}),i.find("input[name='customlink']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].link=$(this).val()}),i.find(".j-moveup").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();if(0!=t){var n=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t-1,0,n),l()}}),i.find(".j-movedown").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.dataset.length;if(t!=n-1){var i=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t+1,0,i),l()}}),i.find(".ctrl-item-list-add").click(function(){var t={linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"#FE9303",pic:"/Public/images/diy/waitupload.png"};e.content.dataset.push(t),l()}),i.find(".j-del").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset.splice(t,1),l()}),i.find(".j-imgNav-cp").on("mouseenter",function(){var t=$(this).data("#FE9303"),n=$(this).closest("li").index();$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,i,o){var i="#"+i;e.content.dataset[n].titleBackgroundColor=i,l()}})}),i.find(".j-textColor-cp").on("mouseenter",function(){var t=$(this).data("#FFF"),n=$(this).closest("li").index();$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,i,o){var i="#"+i;e.content.dataset[n].titleColor=i,l()}})}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}}),i.find(".j-slider2").slider({min:0,max:50,step:1,animate:"fast",value:e.content.levelPadding,slide:function(t,e){n.find(".modulePadding").css({"padding-left":e.value,"padding-right":e.value}),i.find(".j-ctrl-showheight2").text(e.value+"px")},stop:function(t,n){e.content.levelPadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type9=function(t,e){function n(t,e,n,i){var o=disY=0;e=e||t,$(e).on("mousedown",function(e){e=e||event,e.preventDefault(),o=e.clientX-t.offsetLeft,disY=e.clientY-t.offsetTop,$(document).on("mousemove",function(e){e=e||event;var a=e.clientX-o,l=e.clientY-disY,c=n-t.offsetWidth,d=i-t.offsetHeight;a<0?a=0:a>c&&(a=c),l<0?l=0:l>d&&(l=d),t.style.left=a+"px",t.style.top=l+"px"}),$(document).on("mouseup",function(){$(document).off("mousemove"),$(document).off("mouseup")})})}function i(t,e,n,i,o,a,l,c){var d=disY=0;e=e||oDrag;var s=70,r=70;e.onmousedown=function(p){p=p||event,p.preventDefault(),d=p.clientX-this.offsetLeft,disY=p.clientY-this.offsetTop;var u=t.offsetTop,f=t.offsetLeft,m=t.offsetWidth,h=t.offsetHeight;document.onmousemove=function(p){p=p||event;var g=p.clientX-d,v=p.clientY-disY,$=o?m-g:e.offsetWidth+g,y=a?h-v:e.offsetHeight+v;return o&&(t.style.left=f+g+"px"),a&&(t.style.top=u+v+"px"),$<s?$=s:$>n&&($=n),l&&(t.style.width=$+"px"),y<r?y=r:y>i&&(y=i),c&&(t.style.height=y+"px"),(o&&$==s||a&&y==r)&&(document.onmousemove=null),!1},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}}function o(t,e,o){var a=$(t).find(".hotarea-rnd");$.each(a,function(a,l){var c=l,d=$(t).find(".hotarea-rnd .hotarea")[a],s=$(t).find(".resizeL")[a],r=$(t).find(".resizeB")[a],p=$(t).find(".resizeR")[a],u=$(t).find(".resizeT")[a],f=$(t).find(".resizeLT")[a],m=$(t).find(".resizeLB")[a],h=$(t).find(".resizeRT")[a],g=$(t).find(".resizeRB")[a];n(c,d,e,o),i(c,r,e,o,!1,!1,!1,!0),i(c,p,e,o,!1,!1,!0,!1),i(c,u,e,o,!1,!0,!1,!0),i(c,s,e,o,!0,!1,!0,!1),i(c,g,e,o,!1,!1,!0,!0),i(c,h,e,o,!1,!0,!0,!0),i(c,f,e,o,!0,!0,!0,!0),i(c,m,e,o,!0,!1,!0,!0)})}var a=e.dom_conitem,l=t,c=$("#tpl_diy_con_type9").html(),d=$("#tpl_diy_ctrl_type9").html();e.dom_ctrl=t;var s=function(){$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})},r=function(t){var n=$(_.template(c,e));a.find(".members_con").remove().end().append(n);var i=$(_.template(d,e));l.empty().append(i),HYD.DIY.Unit.event_type9(l,e),t&&t()};l.find("input[name='title']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].showtitle=$(this).val(),r()}),l.find("input[name='subtitle']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].subtitle=$(this).val(),r()}),l.find("input[name='showType']").change(function(){e.content.showType=$(this).val(),e.content.datasethot||(e.content.datasethot=[]),e.content.dataset||(e.content.dataset=[]),r(s)}),l.find("input[name='space']").change(function(){e.content.space=$(this).val(),r()}),l.find(".j-slider").slider({min:0,max:20,step:1,animate:"fast",value:e.content.margin,slide:function(t,e){a.find(".members_imgad ul li").css("margin-bottom",e.value),l.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.margin=parseInt(n.value)}}),l.find(".droplist li").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(n,i){e.content.dataset[t].title=n.title,e.content.dataset[t].showtitle=n.title,e.content.dataset[t].link=n.link,e.content.dataset[t].linkType=i,e.content.dataset[t].is_compress=n.is_compress,1==i&&(e.content.dataset[t].item_id=n.item_id),n.pic&&""!=n.pic&&(n.is_compress?e.content.dataset[t].pic=n.pic+"480x480":e.content.dataset[t].pic=n.pic),r()}})}),l.find(".j-selectimg").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.ImgPicker(function(n){3==e.content.showType?e.content.datasethot[t].pic=n[0]:e.content.dataset[t].pic=n[0],r()})}),l.find(".j-draw-hotspot").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.datasethot[t];if(0==e.content.datasethot[t].hostactive.length&&(n.hostactive=[{top:0,left:0,width:22,height:22,linkType:0,link:"",title:"",showtitle:""}]),""==n.pic)return HYD.hint("danger","请选择图片"),!1;var i,a,l=_.template($("#tpl_diy_box_type9").html(),n);$.jBox.show({title:"热区编辑器",content:l,minHeight:400,onOpen:function(n){$(n).find(".image-content img").on("load",function(){i=$(n).find(".image-content img").width(),a=$(n).find(".image-content img").height(),o(n,i,a)}),$(n).find(".j-add-hot").click(function(){var l=_.template($("#tpl_add_hot").html(),{});$(n).find(".hot-box").append(l);var c={top:0,left:0,width:22,height:22,linkType:0,link:"",title:"",showtitle:""};e.content.datasethot[t].hostactive.push(c),o(n,i,a)}),n.on("click",".hotarea-close",function(){var n=$(this).data("index"),n=$(this).index(".hotarea-close");e.content.datasethot[t].hostactive.splice(n,1),$(this).parent().remove()}),n.on("click",".hotarea",function(){$(this).parent().find(".link-menu").hide()}),n.on("mousedown",".hotarea",function(){$(this).parent().find(".link-menu").hide()}),n.on("dblclick",".hotarea",function(){$(".link-menu").hide();var t=$(this).outerWidth(),e=$(this).parent().position().left,n=$(this).parent().outerWidth(),o=$(this).parent().position().top,l=$(this).parent().outerHeight(),c=i-e-n/2-50,d=a-o-l/2-50;console.log(a),c<t?($(this).parent().find(".link-menu").removeAttr("style"),$(this).parent().find(".link-menu").css("right","50%"),d<a/2&&d>300?$(this).parent().find(".link-menu").css("bottom","50%"):$(this).parent().find(".link-menu").css("top","50%")):($(this).parent().find(".link-menu").removeAttr("style"),$(this).parent().find(".link-menu").css("left","50%"),d<a/2&&d>300?$(this).parent().find(".link-menu").css("bottom","50%"):$(this).parent().find(".link-menu").css("top","50%")),$(this).parent().find(".link-menu").show()}),$(n).on("click",".link-menu li",function(){var i=$(this).parents(".hotarea-rnd").index(".hotarea-rnd"),o=$(this).data("val"),a=$(this);11!==o&&111!==o?HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(o,a){e.content.datasethot[t].hostactive[i].title=o.title,e.content.datasethot[t].hostactive[i].showtitle=o.title,e.content.datasethot[t].hostactive[i].link=o.link,e.content.datasethot[t].hostactive[i].linkType=a,e.content.datasethot[t].hostactive[i].is_compress=o.is_compress,$(n).find(".hotarea-text").eq(i).html(o.title),r()}}):$.jBox.show({title:"自定义链接",content:'<div class="formitems"><label class="fi-name">链接地址：</label><div class="form-controls"><input type="text" class="input xlarge " name="customlink" placeholder="http://" ><span class="fi-help-text" style="color: #f44;" id="info"></span></div></div>',btnOK:{onBtnClick:function(n){var l=$(n).find("input[name='customlink']").val();return""==l?void $(n).find("#info").html("请输入链接地址"):(l=l,e.content.datasethot[t].hostactive[i].title=l,e.content.datasethot[t].hostactive[i].showtitle=l,e.content.datasethot[t].hostactive[i].link=l,e.content.datasethot[t].hostactive[i].linkType=o,e.content.datasethot[t].hostactive[i].is_compress="",a.parents(".hotarea-rnd").find(".hotarea-text").html(l),void $.jBox.close(n))}}}),r(),$(this).parent().hide()})},btnOK:{show:!0,onBtnClick:function(n){ParIndex=t,$(n).find(".hotarea-rnd").each(function(t,n){var o=t,l=$(n).outerWidth(),c=$(n).outerHeight(),d=$(n).position().left,s=$(n).position().top;l=Math.round(l/i*100)/100*100,c=Math.round(c/a*100)/100*100,d=Math.round(d/i*100)/100*100,s=Math.round(s/a*100)/100*100,e.content.datasethot[ParIndex].hostactive[o].width=l,e.content.datasethot[ParIndex].hostactive[o].height=c,e.content.datasethot[ParIndex].hostactive[o].left=d,e.content.datasethot[ParIndex].hostactive[o].top=s}),$.jBox.close(n)}},btnCancel:{show:!1}})}),l.find("input[name='customlink']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].link=$(this).val()}),l.find(".j-moveup").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();if(0!=t){if(3==e.content.showType){var n=e.content.datasethot.slice(t,t+1)[0];e.content.datasethot.splice(t,1),e.content.datasethot.splice(t-1,0,n)}else{var n=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t-1,0,n)}r()}}),l.find(".j-movedown").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.dataset.length;if(t!=n-1){if(3==e.content.showType){var i=e.content.datasethot.slice(t,t+1)[0];e.content.datasethot.splice(t,1),e.content.datasethot.splice(t+1,0,i)}else{var i=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t+1,0,i)}r()}}),l.find(".ctrl-item-list-add").click(function(){if(3==e.content.showType){var t={pic:"",hostactive:[{top:0,left:0,width:22,height:22,linkType:0,link:"",title:"",showtitle:""}]};e.content.datasethot.push(t)}else{var t={linkType:0,link:"",title:"",showtitle:"",pic:""};e.content.dataset.push(t)}r()}),l.find(".j-del").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();3==e.content.showType?e.content.datasethot.splice(t,1):e.content.dataset.splice(t,1),r()}),l.find(".j-slider2").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){a.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),l.find(".j-ctrl-showheight2").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}}),l.find(".j-slider3").slider({min:0,max:50,step:1,animate:"fast",value:e.content.levelPadding,slide:function(t,e){a.find(".modulePadding").css({"padding-left":e.value,"padding-right":e.value}),l.find(".j-ctrl-showheight2").text(e.value+"px")},stop:function(t,n){e.content.levelPadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type10=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type10").html(),a=$("#tpl_diy_ctrl_type10").html();e.dom_ctrl=t;var l=function(){
var t=$(_.template(o,e));n.find(".members_con").remove().end().append(t);var l=$(_.template(a,e));i.empty().append(l),HYD.DIY.Unit.event_type10(i,e)},c=function(){$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})};i.find("input[name='lineStyle']").change(function(){var t=$(this).val();e.content.lineStyle=t,l(c)})},HYD.DIY.Unit.event_type11=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type11").html(),a=$("#tpl_diy_ctrl_type11").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type11(i,e),t&&t()};i.find(".j-textColor-bg").on("mouseenter",function(){var t=$(this).data("color");$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,n,i){var n="#"+n;e.content.bgColor=n,l()}})}),i.find("#slider").slider({min:10,max:100,step:1,animate:"fast",value:e.content.height,slide:function(t,e){n.find(".custom-space").css("height",e.value),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.height=parseInt(n.value)}})},HYD.DIY.Unit.event_type12=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type12").html(),a=$("#tpl_diy_ctrl_type12").html();e.dom_ctrl=t;var l=function(){$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})},c=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type12(i,e),t&&t()};i.find("input[name='navtitle']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=$(this).val();e.content.dataset[t].showtitle=n,c()}),i.find(".droplist li").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(n,i){e.content.dataset[t].title=n.title,e.content.dataset[t].showtitle=n.title,e.content.dataset[t].link=n.link,e.content.dataset[t].linkType=i,n.pic&&""!=n.pic&&(e.content.dataset[t].pic=n.pic),c()}})}),i.find(".j-selectimg").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.ImgPicker(function(n){e.content.dataset[t].pic=n[0],c()})}),i.find("input[name='customlink']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].link=$(this).val()}),i.find("select[name='navbgColor']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=$(this).val();e.content.dataset[t].bgColor=n,c()}),i.find('input[name="showstyle"]').change(function(t){var n=$(this),i=n.val();e.content.style=i,c(l)}),i.find('input[name="marginstyle"]').change(function(t){var n=$(this),i=n.val();e.content.marginstyle=i,c(l)}),i.find(".ctrl-item-list-li").each(function(t,n){var i=$(this);i.find(".colorPicker").each(function(n,i){var o=$(this);if(0==n){var a=($(this).data("name"),$(this).data("color"));o.ColorPicker({color:a,onShow:function(t){return $(t).fadeIn(100),!1},onHide:function(t){return $(t).fadeOut(100),c(),!1},onChange:function(n,i,a){var i="#"+i;o.css("background-color",i),e.content.dataset[t].bgColor=i}})}else{var a=($(this).data("name"),$(this).data("color"));o.ColorPicker({color:a,onShow:function(t){return $(t).fadeIn(100),!1},onHide:function(t){return $(t).fadeOut(100),c(),!1},onChange:function(n,i,a){var i="#"+i;o.css("background-color",i),e.content.dataset[t].fotColor=i}})}})}),i.find(".j-uploadIcon").click(function(t){var n=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.ImgPicker(function(t){e.content.dataset[n].pic=t[0],c()})}),i.find(".j-navModifyIcon").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.IconPicker(function(n){e.content.dataset[t].pic=n[0],c()})}),i.find(".j-moveup").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();if(0!=t){var n=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t-1,0,n),c()}}),i.find(".j-movedown").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.dataset.length;if(t!=n-1){var i=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t+1,0,i),c()}}),i.find(".ctrl-item-list-add").click(function(){var t=$(this).closest("ul").children("li").length;if(t<6){var n={linkType:0,link:"",title:"",showtitle:"内容",pic:"",bgColor:"#07a0e7",fotColor:"#fff"};e.content.dataset.push(n),c()}else HYD.hint("danger","顶部菜单不可多于5个")}),i.find(".j-del").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset.splice(t,1),c()}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type13=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type13").html(),a=$("#tpl_diy_ctrl_type13").html();e.dom_ctrl=t;var l=function(){$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})},c=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type13(i,e),t&&t()},d=function(){var t=$("input[name=layout]:checked").val();1==parseInt(t)?$(".board3").each(function(t,e){var n=$(this),i=n.width();n.height(i).css("overflow","hidden")}):$(".board3").each(function(t,e){var n=$(this),i=n.width();!n.hasClass("small_board")&&n.hasClass("big_board")||n.children("span").attr("style","height:"+i+"px !important;overflow:hidden;"),n.hasClass("big_board")&&n.children("span").attr("style","height:"+(2*i+9)+"px !important;overflow:hidden;")}),$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})};i.find('input[name="layout"]').change(function(t){var n=$(this),i=n.val();e.content.layout=i,c(e.content.version&&2==e.content.version?l:d)}),i.find("input[name='title']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].title=$(this).val(),c()}),i.find(".droplist li").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(n,i){if(e.content.dataset[t].title=n.title,e.content.dataset[t].link=n.link,e.content.dataset[t].linkType=i,e.content.dataset[t].is_compress=n.is_compress,1==i&&(e.content.dataset[t].item_id=n.item_id),n.pic&&""!=n.pic){var o=n.pic;if(n.pic.indexOf("@")>0){var a=n.pic,l=[];l=a.split("@"),e.content.dataset[t].pic=l[0]}else if("_"==o.charAt(o.length-1)){var a=o,l="";l=a.substring(0,o.length-1),e.content.dataset[t].pic=l}else{var a=o,l="";l=a.substring(0,o.length),e.content.dataset[t].pic=l}}c()}})}),i.find(".j-selectimg").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.ImgPicker(function(n){var i=n[0];if("_"==i.charAt(i.length-1)){var o=i,a="";a=o.substring(0,i.length-1),e.content.dataset[t].pic=a}if(n[0].indexOf("@!")<0)e.content.dataset[t].pic=n[0];else{var o=n[0],a=[];a=o.split("@"),e.content.dataset[t].pic=a[0],e.content.dataset[t].is_compress=0}e.content.version&&2==e.content.version?c():c(d)})}),i.find("input[name='customlink']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].link=$(this).val()}),i.find(".j-showTitle").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].showTitle=$(this).val(),c(l)}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type14=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type14").html(),a=$("#tpl_diy_ctrl_type14").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type14(i,e)},c=function(t){if(0==t.length)return HYD.hint("danger","请填写视频网址"),"";var e,n,i,o=/vid\=([^\&]*)($|\&)+/g,a=/sid\/\w*.*?/g;return n=t.match(o),i=t.match(a),n&&(n=n.toString(),e="http://v.qq.com/iframe/player.html?"+n+"&tiny=0&auto=0"),i&&(i=i.toString(),i=i.split("/v.swf"),i=i.toString(),i=i.replace("sid/","").replace(",",""),e="http://player.youku.com/embed/"+i),null===n&&null===i?(HYD.hint("danger","请填写正确的视频网址"),""):e};i.find("input[name='videoSource']").change(function(){$(this).parents("li.ctrl-item-list-li").index();e.content.videoSource=$(this).val(),l()}),i.find("input[name='videoPicType']").change(function(){$(this).parents("li.ctrl-item-list-li").index();e.content.videoPicType=$(this).val(),l()}),i.find(".j-getvideo").click(function(t){var n=$(this).prev("input").val();e.content.website=n;var i=c(n);l(i)});var d=function(t){var n,i=$("#tpl_popbox_Video").html(),o=$(i),a=function(t,e){var i=function(t){if(n=t.list,n&&n.length){var i=_.template($("#tpl_popbox_ImgPicker_video").html(),{dataset:n}),l=$(i);l.filter("li").click(function(){$(this).addClass("selected").siblings("li").removeClass("selected")}),o.find(".imgpicker-list").empty().append(l);var c=t.page,d=$(c);d.filter("a:not(.disabled,.cur)").click(function(){var t=$(this).attr("href"),e=t.split("/");return e=e[e.length-1],e=e.replace(/.html/,""),a(e),!1}),o.find(".paginate").empty().append(d)}else o.find(".imgpicker-list").append("<p class='txtCenter'>对不起，暂无视频</p>");e&&e()};$.ajax({url:"/Design/getMediaList",type:"post",dataType:"json",data:{p:parseInt(t),type:"video"},success:function(t){1==t.status?i(t):HYD.hint("danger","对不起，获取数据失败："+t.msg)}})},c=function(t){var n=[],i=[],a=[];o.find("#imgpicker_upload_input").uploadifive({auto:!0,formData:{PHPSESSID:$.cookie("PHPSESSID"),type:"video",notWx:1},width:60,height:60,multi:!0,uploadScript:"/Design/uploadMedia",buttonText:"+",fileSizeLimit:"30MB",fileType:".mp4",onFallback:function(){HYD.hint("danger","请使用支持html5上传的浏览器")},onUploadComplete:function(t,e){var e=$.parseJSON(e),l=$("#tpl_popbox_ImgPicker_video2").html(),c=o.find(".imgpicker-upload-preview"),d=e.file_path,s=e.file_id,r=e.pic;n.push(d),i.push(s),a.push(r);var p=_.template(l,{url:d,id:s}),u=$(p);u.find(".j-imgpicker-upload-btndel").click(function(){var t=o.find(".imgpicker-upload-preview li").index($(this).parent("li"));u.fadeOut(300,function(){n.splice(t,1),$(this).remove()})}),c.append(u)},onError:function(t){t="FILE_SIZE_LIMIT_EXCEEDED"==t||"FORBIDDEN_FILE_TYPE"==t?"请上传30M以内mp4格式的视频":"上传失败，请重试",HYD.hint("danger","对不起："+t)}}),o.find("#j-btn-uploaduse").click(function(){0==n.length?HYD.hint("danger","对不起，您没有选择视频："+e.msg):(e.content.videosrc=n[0],e.content.defaultVideoPic=a[0],l()),$.jBox.close(t)})};a(1,function(){$.jBox.show({title:"选择视频",content:o,btnOK:{show:!1},btnCancel:{show:!1},onOpen:function(i){var a=o.find("#j-btn-listuse"),l=o.find("#j-btn-listdel");a.click(function(){var a=[],l=[],c=[];o.find(".imgpicker-list li.selected").each(function(){a.push(n[$(this).index()].file_path),l.push(n[$(this).index()].file_id),c.push(n[$(this).index()].pic)}),0==a.length?HYD.hint("danger","对不起，您没有选择视频："+e.msg):t&&t(a,c),$.jBox.close(i)}),l.click(function(){var t=o.find(".imgpicker-list li.selected").children(".video").data("id");$.ajax({url:"/Design/delImg",type:"POST",dataType:"json",data:{file_id:t},success:function(t){1==t.status&&(HYD.hint("success","删除成功"),o.find(".imgpicker-list li.selected").remove())}})}),o.find(".j-initupload").one("click",function(){c(i)})}})})};i.find(".j-selectimg").click(function(){HYD.popbox.ImgPicker(function(t){e.content.videoPic=t[0],l()})}),i.find(".j-videoselect").click(function(){d(function(t,n){e.content.videosrc=t[0],e.content.defaultVideoPic=n[0],l()})}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type15=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type15").html(),a=$("#tpl_diy_ctrl_type15").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type15(i,e)},c=function(t){var n,i=$("#tpl_popbox_Audio").html(),o=$(i),a=function(t,e){var i=function(t){if(n=t.list,n&&n.length){var i=_.template($("#tpl_popbox_ImgPicker_audio").html(),{dataset:n}),l=$(i);l.filter("li").click(function(){$(this).addClass("selected").siblings("li").removeClass("selected")}),l.find(".audio-name").click(function(t){return!1}),l.find(".j-get-edit-name").click(function(t){return $(this).hide().siblings(".j-edit-name").show(),$(this).siblings(".j-edit-name").find("input").focus(),!1}),l.find(".j-getAudioName").click(function(t){var e=$(this),n=e.siblings('input[name="audioName"]').val(),i=e.data("id");$.ajax({url:"/Design/renameImg",type:"POST",dataType:"json",data:{file_id:i,file_name:n},success:function(t){1==t.status&&(HYD.hint("success","恭喜您，修改音频名称成功！"),e.closest(".j-edit-name").hide().siblings(".j-curname").html(n))}})}),o.find(".imgpicker-list").empty().append(l);var c=t.page,d=$(c);d.filter("a:not(.disabled,.cur)").click(function(){var t=$(this).attr("href"),e=t.split("/");return e=e[e.length-1],e=e.replace(/.html/,""),a(e),!1}),o.find(".paginate").empty().append(d)}else o.find(".imgpicker-list").append("<p class='txtCenter'>对不起，暂无音频</p>");e&&e()};$.ajax({url:"/Design/getMediaList",type:"post",dataType:"json",data:{p:parseInt(t),type:"voice"},success:function(t){1==t.status?i(t):HYD.hint("danger","对不起，获取数据失败："+t.msg)}})},c=function(t){var n=[],i=[];o.find("#imgpicker_upload_input").uploadifive({auto:!0,formData:{PHPSESSID:$.cookie("PHPSESSID"),type:"voice",notWx:1},width:60,height:60,multi:!0,uploadScript:"/Design/uploadMedia",buttonText:"+",fileSizeLimit:"30MB",fileType:".mp3",onFallback:function(){HYD.hint("danger","请使用支持html5上传的浏览器")},onUploadComplete:function(t,e){var e=$.parseJSON(e),a=$("#tpl_popbox_ImgPicker_audio2").html(),l=o.find(".imgpicker-upload-preview"),c=e.file_path,d=e.file_id;n.push(c),i.push(d);var s=_.template(a,{url:c,id:d}),r=$(s);r.find(".j-imgpicker-upload-btndel").click(function(){var t=o.find(".imgpicker-upload-preview li").index($(this).parent("li"));r.fadeOut(300,function(){n.splice(t,1),$(this).remove()})}),l.append(r)},onError:function(t){HYD.hint("danger","对不起："+file.name+"上传失败：请上传30M以内mp3格式的音频")}}),o.find("#j-btn-uploaduse").click(function(){0==n.length?HYD.hint("danger","对不起，您没有选择音频："+e.msg):(e.content.audiosrc=n[0],l()),$.jBox.close(t)})};a(1,function(){$.jBox.show({title:"选择音频",content:o,btnOK:{show:!1},btnCancel:{show:!1},onOpen:function(i){var a=o.find("#j-btn-listuse"),l=o.find("#j-btn-listdel");a.click(function(){var a=[],l=[];o.find(".imgpicker-list li.selected").each(function(){a.push(n[$(this).index()].file_path),l.push(n[$(this).index()].file_id)}),0==a.length?HYD.hint("danger","对不起，您没有选择音频："+e.msg):t&&t(a),$.jBox.close(i)}),l.click(function(){var t=o.find(".imgpicker-list li.selected").children(".audio-flag").data("id");$.ajax({url:"/Design/delImg",type:"POST",dataType:"json",data:{file_id:t},success:function(t){1==t.status&&(HYD.hint("success","删除成功"),o.find(".imgpicker-list li.selected").remove())}})}),o.find(".j-initupload").one("click",function(){c(i)})}})})};i.find(".j-selectimg").click(function(){$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.ImgPicker(function(t){e.content.imgsrc=t[0],l()})}),i.find(".j-audioselect").click(function(){c(function(t){e.content.audiosrc=t[0],l()})}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}}),i.find(".colpck-bgColor").ColorPicker({color:e.content.bgColor,onShow:function(t){return $(t).fadeIn(100),!1},onHide:function(t){return $(t).fadeOut(100),!1},onChange:function(t,o,a){var o="#"+o;e.content.bgColor=o,i.find(".colpck-bgColor").css("background-color",o),n.find(".arrow-right").css("border-left","10px solid"+o),n.find(".arrow-rights").css("background-color",o)}})},HYD.DIY.Unit.event_type16=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type16").html(),a=$("#tpl_diy_ctrl_type16").html();e.dom_ctrl=t;var l=function(){$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})},c=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type16(i,e),t&&t()};i.find("input[name='notice']").change(function(){var t=$(this).val();n.find(".j-notice").text("公告："+$(this).val()),e.content.strLength=t.length,e.content.showtitle=t,c()}),i.find("input[name='noticeStyle']").change(function(){var t=$(this).val();e.content.noticeStyle=t,c(l)}),i.find(".colpck-bgColor").ColorPicker({color:e.content.bgColor,onShow:function(t){return $(t).fadeIn(100),!1},onHide:function(t){return $(t).fadeOut(100),!1},onChange:function(t,o,a){var o="#"+o;e.content.bgColor=o,i.find(".colpck-bgColor").css("background-color",o),n.find(".members_notice").css("background-color",o)}}),i.find(".colpck-fontColor").ColorPicker({color:e.content.fontColor,onShow:function(t){return $(t).fadeIn(100),!1},onHide:function(t){return $(t).fadeOut(100),!1},onChange:function(t,o,a){var o="#"+o;e.content.fontColor=o,i.find(".colpck-fontColor").css("background-color",o),n.find(".j-notice").css("color",o)}}),i.find("input[name='fontSize']").change(function(){var t=$(this).val();n.find(".notice-con").removeClass("font12 font14 font16").addClass(t),e.content.fontSize=t}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type17=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type17").html(),a=$("#tpl_diy_ctrl_type17").html();$("#front_domain").val();e.dom_ctrl=t;var l=(n.find("ul>li").length,n.find("ul").outerHeight(!0)),c=n.find("ul>li").outerHeight(!0);l==2*c||l==c?n.find(".toggle").hide():n.find(".toggle").show();var d=function(){$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})},s=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type17(i,e),t&&t()};i.find(".droplist li").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(n,i){e.content.dataset[t].title=n.title,e.content.dataset[t].showtitle=n.title,e.content.dataset[t].link=n.link,e.content.dataset[t].linkType=i,n.pic&&""!=n.pic&&(e.content.dataset[t].pic=n.pic),s()}})}),i.find("input[name='customlink']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].link=$(this).val()}),i.find("input[name='classify']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=$(this).val();e.content.dataset[t].showtitle=n,s()}),i.find("select[name='navbgColor']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=$(this).val();e.content.dataset[t].bgColor=n,s()}),i.find(".ctrl-item-list-li").each(function(t,n){var i=$(this);i.find(".colorPicker1").each(function(n,i){var o=$(this);if(0==n){var a=($(this).data("name"),$(this).data("color"));o.ColorPicker({color:a,onShow:function(t){return $(t).fadeIn(100),!1},onHide:function(t){return $(t).fadeOut(100),s(),!1},onChange:function(n,i,a){var i="#"+i;o.css("background-color",i),e.content.dataset[t].bgColor=i}})}else{var a=($(this).data("name"),$(this).data("color"));o.ColorPicker({color:a,onShow:function(t){return $(t).fadeIn(100),!1},onHide:function(t){return $(t).fadeOut(100),s(),!1},onChange:function(n,i,a){var i="#"+i;o.css("background-color",i),e.content.dataset[t].fotColor=i}})}})}),i.find("input[name='layout']").change(function(){var t=$(this).val();n.find(".members_classify").attr("class","members_classify layoutstyle"+t),e.content.layout=t}),i.find("input[name='category']").change(function(){var t=$(this).val();n.find(".swiper-container").attr("class","swiper-container category"+t),e.content.category=t,s(d)}),i.find(".j-moveup").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();if(0!=t){var n=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t-1,0,n),s()}}),i.find(".j-movedown").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.dataset.length;if(t!=n-1){var i=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t+1,0,i),s()}}),i.find(".ctrl-item-list-add").click(function(){var t={link:"#",linkType:0,showtitle:"内容",bgColor:"#28c192",cloPicker:"2",fotColor:"#fff"};e.content.dataset.push(t),s()}),i.find(".j-del").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset.splice(t,1),s()}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type18=function(t,e){var n=e.dom_conitem,i=t;i.find(".J-edit-signtemp").click(function(){var t=n.find(".wx_compose").html();$.composeBox({content:t,callback:function(t,i){""!=t&&""!=i||(t="<p>『微排版编辑器』</p>"),n.find(".wx_compose").html(t),e.content.fulltext=HYD.DIY.Unit.html_encode(t)}})}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type19=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type19").html(),a=$("#tpl_diy_ctrl_type19").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type19(i,e),t&&t()},c=function(){n.find(".mingoods,.biggoods,.b_mingoods").each(function(t,e){var n=$(this),i=n.find("img").width();n.find("img").closest("a").height(i)})};i.find("input[name='layout']").change(function(){var t=$(this).val();e.content.layout=t,l(c)}),i.find("input[name='goodstyle']").change(function(){var t=$(this).val();e.content.goodstyle=t,l(c)}),i.find("input[name='layoutstyles']").change(function(){var t=$(this).val();e.content.layoutstyles=t,l(c)}),i.find("input[name='showName']").change(function(){var t=$(this).val();e.content.showName=t,l(c)}),i.find("input[name='showIco']").change(function(){var t=$(this).is(":checked");e.content.showIco=t,l(c)}),i.find("input[name='showPrice']").change(function(){var t=$(this).is(":checked");e.content.showPrice=t,l(c)}),i.find("input[name='priceBold']").change(function(){var t=$(this).val();e.content.priceBold=t,l(c)}),i.find("input[name='goodstxt']").change(function(){var t=$(this).val();n.find(".goods-btn a").text($(this).val()),e.content.goodstxt=t,l(c)}),i.find("input[name='multiLine']").change(function(){$(this).attr("checked")?($(this).attr("checked","true"),e.content.titleLine=1):($(this).removeAttr("checked"),e.content.titleLine=0),l(c)}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type20=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type20").html(),a=$("#tpl_diy_ctrl_type20").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type20(i,e),t&&t()},c=function(){n.find(".act_img").each(function(t,e){var n=$(this),i=n.find("img").width();n.find("img").closest("a").height(i)})},d=function(){n.find(".J_sliderGoods").each(function(){var t=$(this),e=t.find("li").width(),n=t.find("li").height();t.css({height:n}).find("li").css("width",e-2)})};i.find("input[name='goods_status']").change(function(){var t=$(this).val();e.content.act_status=t,l(c)}),i.find("input[name='goods_status_price']").change(function(){var t=$(this).val();e.content.act_status_price=t,l(c)}),i.find(".j-addgoods").click(function(){var t=i.find("input[name=goods_id]").val();return $.selectGoods({selectMod:1,selectIds:t,callback:function(t,n){e.content.goodslist.splice(0,e.content.goodslist.length),e.content.goodslist=e.content.goodslist.concat(t),l(c),d()}}),!1}),i.find(".j-delgoods").click(function(){var t=$(this).parents("li").index();return e.content.goodslist.splice(t,1),l(c),d(),!1}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type21=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type21").html(),a=$("#tpl_diy_ctrl_type21").html();e.dom_ctrl=t;var l=function(){var t=$(_.template(o,e));n.find(".members_con").remove().end().append(t);var l=$(_.template(a,e));i.empty().append(l),HYD.DIY.Unit.event_type21(i,e)},c=function(){n.find(".mingoods,.biggoods,.b_mingoods").each(function(t,e){var n=$(this),i=n.find("img").width();n.find("img").closest("a").height(i)})};i.find("input[name='tabstyle']").change(function(){var t=$(this).val();e.content.tabstyle=t,l(c)}),i.find("input[name='tabtitle']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.goodslist[t].tabtitle=$(this).val(),l()}),i.find(".j-delgoods").click(function(){var t=$(this).parent().parent().index(),n=$(this).parents("li.ctrl-item-list-li").index();return e.content.goodslist[n].goods.splice(t,1),l(c),!1}),i.find(".j-addgoods").click(function(){var t=$(this).parents("li"),n=t.index(),i=t.find("input[name=goods_ids]").val().split(",");return $.selectGoods({selectMod:2,selectIds:i,callback:function(t,i){e.content.goodslist[n].goods=e.content.goodslist[n].goods.concat(t),l(c)}}),!1}),i.find(".img-list>li .img-move-left").on("click",function(){var t=$(this),n=t.closest("li").index(),i=$(this).parents("li.ctrl-item-list-li").index(),o=t.closest("li");if(0!=n){n--,t.closest("ul").find("li").eq(n).before(o);var a=e.content.goodslist[i].goods.slice(n+1,n+2)[0];e.content.goodslist[i].goods.splice(n+1,1),e.content.goodslist[i].goods.splice(n,0,a),l(c)}return!1}),i.find(".img-list>li .img-move-right").on("click",function(){var t=$(this),n=t.closest("ul").find("li").length-1,i=t.closest("li").index(),o=$(this).parents("li.ctrl-item-list-li").index(),a=t.closest("li");if(i!=n-1){i++,t.closest("ul").find("li").eq(i).after(a);var d=e.content.goodslist[o].goods.slice(i,i+1)[0];e.content.goodslist[o].goods.splice(i,1),e.content.goodslist[o].goods.splice(i-1,0,d),l(c)}return!1}),i.find(".ctrl-item-list-add").click(function(){var t={tabtitle:"自定义",goods:[]};e.content.goodslist.push(t),l()}),i.find(".j-del").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.goodslist.splice(t,1),l()}),i.find(".j-moveup").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();if(0!=t){var n=e.content.goodslist.slice(t,t+1)[0];e.content.goodslist.splice(t,1),e.content.goodslist.splice(t-1,0,n),l()}}),i.find(".j-movedown").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.goodslist.length;if(t!=n-1){var i=e.content.goodslist.slice(t,t+1)[0];e.content.goodslist.splice(t,1),e.content.goodslist.splice(t+1,0,i),l()}}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type22=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type22").html(),a=$("#tpl_diy_ctrl_type22").html();n.parent();e.dom_ctrl=t;var l=function(){$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})},c=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=parseInt(n.find(".diy-slideNav ul>li").length),d=parseInt(n.find(".diy-slideNav ul>li").width()),s=c*d+8*c;n.find(".members_con .slideNav_img").css("height",n.find(".members_con .slideNav_img").width()+2);$(this).parents("li.ctrl-item-list-li").index();e.content.pheight=n.find(".members_con .slideNav_img").width(),n.find(".members_con .diy-slideNav ul").css("width",s),e.content.Uwidth=s;var r=$(_.template(a,e));i.empty().append(r),HYD.DIY.Unit.event_type22(i,e),t&&t()};i.find("input[name='layout'],input[name='layout1_style'],input[name='hasImgMargin']").change(function(){var t=$(this).attr("name");e.content[t]=$(this).val(),c(l)}),i.find("input[name='title']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].showtitle=$(this).val(),c()}),i.find(".droplist li").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(n,i){e.content.dataset[t].title=n.title,e.content.dataset[t].showtitle=n.title,e.content.dataset[t].link=n.link,e.content.dataset[t].linkType=i,e.content.dataset[t].group_id=n.group_id,1==i&&(e.content.dataset[t].item_id=n.item_id),n.pic&&""!=n.pic&&(n.is_compress?e.content.dataset[t].pic=n.pic+"480x480":e.content.dataset[t].pic=n.pic),c()}})}),i.find(".j-selectimg").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.ImgPicker(function(n){e.content.dataset[t].pic=n[0],c()})}),i.find("input[name='customlink']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].link=$(this).val()}),i.find(".j-moveup").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();if(0!=t){var n=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t-1,0,n),c()}}),i.find(".j-movedown").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.dataset.length;if(t!=n-1){var i=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t+1,0,i),c()}}),i.find(".ctrl-item-list-add").click(function(){var t={linkType:0,link:"#",showtitle:"导航名称",titleColor:"#000",titleBackgroundColor:"transparent",pic:"/Public/images/diy/waitupload.png"};e.content.dataset.push(t),c()}),i.find(".j-del").click(function(){
var t=$(this).parents("li.ctrl-item-list-li, li").index();e.content.dataset.splice(t,1),c()}),i.find(".j-imgNav-cp").on("mouseenter",function(){var t=$(this).data("#fff"),n=$(this).closest("li").index();$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,i,o){var i="#"+i;e.content.dataset[n].titleBackgroundColor=i,c()}})}),i.find(".j-textColor-cp").on("mouseenter",function(){var t=$(this).data("#FFF"),n=$(this).closest("li").index();$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,i,o){var i="#"+i;e.content.dataset[n].titleColor=i,c()}})}),i.find("input[name='fontSize']").change(function(){var t=$(this).val();n.find(".slider-con").css("font-size",t+"px"),e.content.fontSize=t,c(l)}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},_QV_="%e6%9d%ad%e5%b7%9e%e5%90%af%e5%8d%9a%e7%a7%91%e6%8a%80%e6%9c%89%e9%99%90%e5%85%ac%e5%8f%b8%e7%89%88%e6%9d%83%e6%89%80%e6%9c%892018%2f02%2f02+0%3a00",HYD.DIY.Unit.event_type23=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type23").html(),a=$("#tpl_diy_ctrl_type23").html();n.parent();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=parseInt(n.find(".diy-slideNav ul>li").length),d=parseInt(n.find(".diy-slideNav ul>li").width()),s=c*d+8*c;n.find(".members_con .slideNav_img").css("height",n.find(".members_con .slideNav_img").width()+2);$(this).parents("li.ctrl-item-list-li").index();e.content.pheight=n.find(".members_con .slideNav_img").width(),n.find(".members_con .diy-slideNav ul").css("width",s),e.content.Uwidth=s;var r=$(_.template(a,e));i.empty().append(r),HYD.DIY.Unit.event_type23(i,e),t&&t()};i.find("input[name='layout'],input[name='layout1_style'],input[name='hasImgMargin']").change(function(){var t=$(this).attr("name");e.content[t]=$(this).val(),l()}),i.find("input[name='title']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].showtitle=$(this).val(),l()}),i.find(".droplist li").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.dplPickerColletion({linkType:$(this).data("val"),callback:function(n,i){e.content.dataset[t].title=n.title,e.content.dataset[t].showtitle=n.title,e.content.dataset[t].link=n.link,e.content.dataset[t].linkType=i,1==i&&(e.content.dataset[t].item_id=n.item_id),11==i&&(e.content.dataset[t].showtitle="输入文字"),n.pic&&""!=n.pic&&(n.is_compress?e.content.dataset[t].pic=n.pic+"480x480":e.content.dataset[t].pic=n.pic),l()}})}),i.find(".j-selectimg").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();HYD.popbox.ImgPicker(function(n){e.content.dataset[t].pic=n[0],l()})}),i.find("input[name='customlink']").change(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.dataset[t].link=$(this).val()}),i.find(".j-moveup").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();if(0!=t){var n=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t-1,0,n),l()}}),i.find(".j-movedown").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.dataset.length;if(t!=n-1){var i=e.content.dataset.slice(t,t+1)[0];e.content.dataset.splice(t,1),e.content.dataset.splice(t+1,0,i),l()}}),i.find(".ctrl-item-list-add").click(function(){var t={linkType:0,link:"#",showtitle:"导航名称",titleColor:"#000",titleBackgroundColor:"transparent",pic:"/Public/images/diy/waitupload.png"};e.content.dataset.push(t),l()}),i.find(".j-del").click(function(){var t=$(this).parents("li.ctrl-item-list-li, li").index();e.content.dataset.splice(t,1),l()}),i.find(".j-imgNav-cp").on("mouseenter",function(){var t=$(this).data("#fff"),n=$(this).closest("li").index();$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,i,o){var i="#"+i;e.content.dataset[n].titleBackgroundColor=i,l()}})}),i.find(".j-textColor-cp").on("mouseenter",function(){var t=$(this).data("#FFF"),n=$(this).closest("li").index();$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,i,o){var i="#"+i;e.content.dataset[n].titleColor=i,l()}})}),i.find("input[name='fontSize']").change(function(){var t=$(this).val();n.find(".slider-con").css("font-size",t+"px"),e.content.fontSize=t,l()}),i.find("input[name='is_stick']").change(function(){var t=$(this).val();e.content.is_stick=t,e.is_top=t,l()}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type25=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type25").html(),a=$("#tpl_diy_ctrl_type25").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type25(i,e),t&&t()};i.find("input[name='title']").change(function(){var t=$(this).val();return""==t&&(t="附近商家"),t.length>15?(HYD.hint("danger","标题长度不能大于15"),void $(this).val(e.content.title)):(e.content.title=t,void l())})},HYD.DIY.Unit.event_type26=function(t,e){e.dom_conitem;e.dom_ctrl=t},HYD.DIY.Unit.event_type27=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type27").html(),a=$("#tpl_diy_ctrl_type27").html();e.dom_ctrl=t;var l=function(t){var l=$(_.template(o,e));n.find(".members_con").remove().end().append(l);var c=$(_.template(a,e));i.empty().append(c),HYD.DIY.Unit.event_type27(i,e),t&&t()},c=function(){n.find(".point_goods").each(function(t,e){var n=$(this),i=n.find(".goods_img img").width();n.find(".goods_img").find("a").height(i)}),$("input[type='radio'],input[type='checkbox']").each(function(){"checked"==$(this).attr("checked")&&$(this).parents().addClass("on")})},d=function(t,e,n){for(var i=0;i<t.length;i++)if(t[i][e]==n)return i},s=function(t){var n=t.index(),i=t.data("item"),o=e.content.goodslist,a=d(o,"item_id",i),s=o.slice(a,a+1)[0];s&&(o.splice(a,1),o.splice(n,0,s)),l(c)};$(".goods-sortable").sortable({revert:!0,cursor:"move",placeholder:"goods-drag",items:"li.goods-item",opacity:.9,update:function(t,e){s(e.item)}}).disableSelection(),i.find("input[name='layout']").change(function(){var t=$(this).val();e.content.layout=t,l(c)}),i.find("input[name='showName']").change(function(){var t=$(this).val();e.content.showName=t,l(c)}),i.find("input[name='multiLine']").change(function(){$(this).attr("checked")?($(this).attr("checked","true"),e.content.titleLine=1):($(this).removeAttr("checked"),e.content.titleLine=0),l(c)}),i.find(".j-delgoods").click(function(){var t=$(this).parents("li").index();return e.content.goodslist.splice(t,1),l(c),!1}),i.find(".j-addgoods").click(function(){var t=i.find("input[name=goods_ids]").val().split(",");return $.selectGoods({selectMod:2,selectIds:t,rtype:"point_exchange",callback:function(t,n){e.content.goodslist=e.content.goodslist.concat(t),console.log(e.content.goodslist),l(c)}}),!1}),i.find(".img-list>li .img-move-left").on("click",function(){var t=$(this),n=t.closest("li").index(),i=t.closest("li");if(0!=n){n--,t.closest("ul").find("li").eq(n).before(i);var o=e.content.goodslist.slice(n+1,n+2)[0];e.content.goodslist.splice(n+1,1),e.content.goodslist.splice(n,0,o),l(c)}return!1}),i.find(".img-list>li .img-move-right").on("click",function(){var t=$(this),n=t.closest("ul").find("li").length-1,i=t.closest("li").index(),o=t.closest("li");if(i!=n-1){i++,t.closest("ul").find("li").eq(i).after(o);var a=e.content.goodslist.slice(i,i+1)[0];e.content.goodslist.splice(i,1),e.content.goodslist.splice(i-1,0,a),l(c)}return!1}),i.find(".j-textColor-cp").on("mouseenter",function(){var t=$(this).data("color");$(this).ColorPicker({color:t,onShow:function(t){return $(t).fadeIn(500),!1},onHide:function(t){return $(t).fadeOut(500),!1},onChange:function(t,n,i){var n="#"+n;e.content.titleColor=n,l(c)}})}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}}),i.find(".j-slider2").slider({min:0,max:50,step:1,animate:"fast",value:e.content.levelPadding,slide:function(t,e){n.find(".modulePadding").css({"padding-left":e.value,"padding-right":e.value}),i.find(".j-ctrl-showheight2").text(e.value+"px")},stop:function(t,n){e.content.levelPadding=parseInt(n.value)}})},HYD.DIY.Unit.event_type28=function(t,e){var n=e.dom_conitem,i=t,o=$("#tpl_diy_con_type28").html(),a=$("#tpl_diy_ctrl_type28").html();e.dom_ctrl=t;var l=function(){var t=$(_.template(o,e));n.find(".members_con").remove().end().append(t);var l=$(_.template(a,e));i.empty().append(l),HYD.DIY.Unit.event_type28(i,e)};i.find(".j-del").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();e.content.goodslist.splice(t,1),l()}),i.find(".j-moveup").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index();if(0!=t){var n=e.content.goodslist.slice(t,t+1)[0];e.content.goodslist.splice(t,1),e.content.goodslist.splice(t-1,0,n),l()}}),i.find(".j-movedown").click(function(){var t=$(this).parents("li.ctrl-item-list-li").index(),n=e.content.goodslist.length;if(t!=n-1){var i=e.content.goodslist.slice(t,t+1)[0];e.content.goodslist.splice(t,1),e.content.goodslist.splice(t+1,0,i),l()}}),i.find(".j-slider").slider({min:0,max:50,step:1,animate:"fast",value:e.content.modulePadding,slide:function(t,e){n.find(".modulePadding").css({"padding-top":e.value,"padding-bottom":e.value}),i.find(".j-ctrl-showheight").text(e.value+"px")},stop:function(t,n){e.content.modulePadding=parseInt(n.value)}})}}),$(function(){HYD.DIY.Unit.verifyWhiteList=["1","6","10","11","12","13","14","15","16","17","21","22","25","Header_style1","Header_style2","Header_style3","Header_style4","Header_style5","Header_style6","Header_style7","Header_style8","Header_style9","Header_style10","Header_style11","Header_style12","Header_style13","Header_style14","Header_style15","Header_style16","Header_style17","Header_style18","Header_style19","Header_style20","Header_style21","Header_style7_news","Header_style9_news","Header_style12_ad","Header_style12_nav","Header_style15_news","UserCenter","Navigation","MgzCate","GoodsGroup"],HYD.DIY.Unit.verify_type2=function(t){var e=!1,n=!0,i=function(){e||(t.dom_conitem.find(".diy-conitem-action").click(),e=!0,n=!1)};if(""==t.content.title){i();var o=t.dom_ctrl.find("input[name='title']");HYD.FormShowError(o,"请填写标题")}if(""==t.content.subtitle){i();var o=t.dom_ctrl.find("input[name='subtitle']");HYD.FormShowError(o,"请填写副标题")}return n},HYD.DIY.Unit.verify_type3=function(t){var e=!1,n=!0,i=function(){e||(t.dom_conitem.find(".diy-conitem-action").click(),e=!0,n=!1)};if(!t.content){i();var o=t.dom_ctrl.find(".j-verify");HYD.FormShowError(o,"请选择一个自定义模块")}return n},HYD.DIY.Unit.verify_type4=function(t){var e=!1,n=!0,i=function(){e||(t.dom_conitem.find(".diy-conitem-action").click(),e=!0,n=!1)};if(!t.content.goodslist.length){i();var o=t.dom_ctrl.find(".j-verify");HYD.FormShowError(o,"请至少选择一件商品")}return n},HYD.DIY.Unit.verify_type5=function(t){var e=!1,n=!0,i=function(){e||(t.dom_conitem.find(".diy-conitem-action").click(),e=!0,n=!1)};if(!t.content.group){i();var o=t.dom_ctrl.find(".j-verify");HYD.FormShowError(o,"请选择商品分组")}return n},HYD.DIY.Unit.verify_type7=function(t){var e=!1,n=!0,i=function(){e||(t.dom_conitem.find(".diy-conitem-action").click(),e=!0,n=!1)};t.content.dataset.length||(i(),t.dom_ctrl.find(".j-verify-least").addClass("error").text("请至少添加一个导航链接"));for(var o=0;o<t.content.dataset.length;o++){var a=t.content.dataset[o];if(""==a.showtitle){i();var l=t.dom_ctrl.find(".ctrl-item-list-li:eq("+o+") input[name='title']");HYD.FormShowError(l,"请输入导航名称")}0==a.linkType&&(i(),t.dom_ctrl.find(".ctrl-item-list-li:eq("+o+") .j-verify-linkType").addClass("error").text("请选择要链接的地址"))}return n},HYD.DIY.Unit.verify_type8=function(t){var e=!1,n=!0,i=function(){e||(t.dom_conitem.find(".diy-conitem-action").click(),e=!0,n=!1)};t.content.dataset.length||(i(),t.dom_ctrl.find(".j-verify-least").addClass("error").text("请至少添加一个图片导航"));for(var o=0;o<t.content.dataset.length;o++){var a=t.content.dataset[o];0==a.linkType&&(i(),t.dom_ctrl.find(".ctrl-item-list-li:eq("+o+") .j-verify-linkType").addClass("error").text("请选择要链接的地址")),""==a.pic&&(i(),t.dom_ctrl.find(".ctrl-item-list-li:eq("+o+") .j-verify-pic").addClass("error").text("请选择一张图片"))}return n},HYD.DIY.Unit.verify_type9=function(t){var e=!1,n=!0,i=function(){e||(t.dom_conitem.find(".diy-conitem-action").click(),e=!0,n=!1)};t.content.dataset.length||t.content.datasethot.length||(i(),t.dom_ctrl.find(".j-verify-least").addClass("error").text("请至少添加一个图片广告"));for(var o=0;o<t.content.dataset.length;o++){var a=t.content.dataset[o];0==a.linkType&&(i(),t.dom_ctrl.find(".ctrl-item-list-li:eq("+o+") .j-verify-linkType").addClass("error").text("请选择要链接的地址")),""==a.pic&&(i(),t.dom_ctrl.find(".ctrl-item-list-li:eq("+o+") .j-verify-pic").addClass("error").text("请选择一张图片"))}return n},HYD.DIY.Unit.verify=function(){var t=HYD.DIY.Unit.verifyWhiteList,e=!0,n=HYD.DIY.LModules.length,i=HYD.DIY.PModules.length;if(n)for(var o=0;o<n;o++){var a=HYD.DIY.LModules[o];if(t.indexOf(a.type.toString())<0&&!HYD.DIY.Unit["verify_type"+a.type](a)){e=!1;break}}if(i)for(var o=0;o<i;o++){var a=HYD.DIY.PModules[o];if(t.indexOf(a.type.toString())<0&&!HYD.DIY.Unit["verify_type"+a.type](a)){e=!1;break}}return e}}),$(function(){$(document).on("click",".j-add-stepType",function(){var t=$(this),e=t.data("type"),n=t.closest(".diy-conitem").index();$(".stepTypeIndex").val(n);var i=$("#tpl_diy_ctrl").html(),o=$(".diy-addModules-tpl").html(),a=$("#tpl_addModules").html(),l=$(a).filter(".diy-ctrl-item").append(o),c=(_.template(i,{html:l}),$(l)),d=($("#diy-contain"),$("#diy-ctrl")),s=t.closest(".diy-conitem");d.find(".diy-ctrl-item[data-origin='item']").remove(),d.append(c),HYD.DIY.repositionCtrl(s,c),c.show().siblings(".diy-ctrl-item").hide(),1==e?$(".stepType").val(1):$(".stepType").val(2)}),$(document).on("click",".j-add-moudles",function(){var t=$(this),e=$("#tpl_diy_ctrl").html(),n=$(".diy-addModules-tpl").html(),i=$("#tpl_addModules").html(),o=$(i).filter(".diy-ctrl-item").append(n),a=(_.template(e,{html:o}),$(o)),l=$("#diy-contain"),c=$("#diy-ctrl"),d=t.data("index"),s=t.data("index_move");$(".stepTypeIndex").val(d),$(".stepType").val(2);var r=l.find(".diy-conitem").eq(s);c.find(".diy-ctrl-item[data-origin='item']").remove(),c.find(".diy-ctrl-item[data-origin='pagetitle']").hide(),c.append(a),HYD.DIY.repositionCtrl(r,a)}),$(document).on("click",".j-diy-addModule",function(){var t=$(this).data("type"),e=$(".stepType").val(),n=$(".stepTypeIndex").val(),i={id:HYD.DIY.getTimestamp(),type:t,draggable:!0,sort:0,content:null};switch(t){case 1:i.ue=null,i.content={fulltext:"&lt;p&gt;『富文本编辑器』&lt;/p&gt;",modulePadding:5,isPreview:!0};break;case 2:i.content={title:"标题名称",style:0,direction:"left",BackgroundColor:"#fd5b6b",bgColor:"#28c192",titleColor:"#ffffff",modulePadding:5,levelPadding:0,linkType:0,link:""};break;case 3:i.content={modulePadding:0};break;case 4:i.content={layout:1,showPrice:!0,showIco:!0,showName:1,goodslist:[],sale_num:5,goodstyle:1,layoutstyles:1,goodstxt:"立即购买",titleLine:0,version:1,modulePadding:5,priceBold:1,cornerMark:1};break;case 5:i.content={layout:1,showPrice:!0,showIco:!0,showName:!0,group:null,goodsize:6,sale_num:5,goodstyle:1,layoutstyles:1,goodstxt:"立即购买",version:1,modulePadding:5,goodslist:[{item_id:"1",link:"#",pic:"/Public/images/diy/waitupload.png",price:"100.00",original_price:"200.00",title:"第一个商品"},{item_id:"2",link:"#",pic:"/Public/images/diy/waitupload.png",price:"200.00",original_price:"300.00",title:"第二个商品"},{item_id:"3",link:"#",pic:"/Public/images/diy/waitupload.png",price:"300.00",original_price:"400.00",title:"第三个商品"},{item_id:"4",link:"#",pic:"/Public/images/diy/waitupload.png",price:"400.00",original_price:"500.00",title:"第四个商品"}]};break;case 6:i.content={modulePadding:5};break;case 7:i.content={modulePadding:5,dataset:[{linkType:0,link:"",title:"",showtitle:""}]};break;case 8:i.content={layout:1,layout1_style:1,modulePadding:5,levelPadding:0,hasImgMargin:1,dataset:[{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"#FE9303",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"#FE9303",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"#FE9303",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"#FE9303",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"#FE9303",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"}]};break;case 9:i.content={showType:2,space:0,margin:5,modulePadding:5,levelPadding:0,dataset:[],datasethot:[]};break;case 10:i.content={lineStyle:1};break;case 11:i.content={height:10};break;case 12:i.content={style:0,marginstyle:1,modulePadding:5,dataset:[{link:"/Shop/index",linkType:6,showtitle:"首页",title:"店铺主页",pic:"/PublicMob/images/icon/style1/color0/icon_home.png",bgColor:"#ededed",cloPicker:"0",fotColor:"#333333"},{link:"/Shop/index",linkType:6,showtitle:"新品",title:"",pic:"/PublicMob/images/icon/style1/color0/icon_newgoods.png",bgColor:"#ededed",cloPicker:"1",fotColor:"#333333"},{link:"/Shop/index",linkType:6,showtitle:"热卖",title:"店铺主页",pic:"/PublicMob/images/icon/style1/color0/icon_hotsale.png",bgColor:"#ededed",cloPicker:"2",fotColor:"#333333"},{link:"/Shop/index",linkType:6,showtitle:"推荐",title:"",pic:"/PublicMob/images/icon/style1/color0/icon_subject.png",bgColor:"#ededed",cloPicker:"3",fotColor:"#333333"}]};break;case 13:i.content={layout:0,version:2,modulePadding:5,dataset:[{linkType:0,link:"#",showTitle:1,title:"橱窗文字",pic:"/Public/images/diy/waitupload2.png"},{linkType:0,link:"#",showTitle:1,title:"橱窗文字",pic:"/Public/images/diy/waitupload2.png"},{linkType:0,link:"#",showTitle:1,title:"橱窗文字",pic:"/Public/images/diy/waitupload2.png"}]};break;case 14:i.content={website:"",modulePadding:5,videoSource:"1",videosrc:"",videoPicType:"1",defaultVideoPic:"",videoPic:"/Public/images/diy/default_video.png"};break;case 15:i.content={direct:0,imgsrc:"",audiosrc:"",modulePadding:5,bgColor:"#0e86d5"};break;case 16:i.content={linkType:0,title:"公告",showtitle:"请填写内容，如果过长，将会滚动显示",bgColor:"#ffffcc",noticeStyle:"1",cloPicker:"2",fontSize:"font12",fontColor:"#ffb432",modulePadding:5};break;case 17:i.content={layout:0,category:0,modulePadding:5,dataset:[{linkType:0,link:"#",showtitle:"内容1",bgColor:"#ededed",cloPicker:"2",fotColor:"#333333"},{linkType:0,link:"#",showtitle:"内容2",bgColor:"#ededed",cloPicker:"2",fotColor:"#333333"},{linkType:0,link:"#",showtitle:"内容3",bgColor:"#ededed",cloPicker:"2",fotColor:"#333333"},{linkType:0,link:"#",showtitle:"内容4",bgColor:"#ededed",cloPicker:"2",fotColor:"#333333"},{linkType:0,link:"#",showtitle:"内容5",bgColor:"#ededed",cloPicker:"2",fotColor:"#333333"},{linkType:0,link:"#",showtitle:"内容6",bgColor:"#ededed",cloPicker:"2",fotColor:"#333333"}]};break;case 18:i.content={fulltext:"&lt;p&gt;『微排版编辑器』&lt;/p&gt;",modulePadding:5};break;case 19:i.content={layout:1,showPrice:!0,showIco:!0,showName:1,goodslist:[],sale_num:5,goodstyle:1,layoutstyles:1,goodstxt:"立即购买",titleLine:0,modulePadding:5,priceBold:1};break;case 20:i.content={goodslist:[],act_status:"还有机会",act_status_price:"疯抢价",modulePadding:5};break;case 21:i.content={tabstyle:1,layout:1,showPrice:!0,showIco:!0,showName:1,titleLine:0,version:1,modulePadding:0,goodslist:[{tabtitle:"卡片一",goods:[]},{tabtitle:"卡片二",goods:[]},{tabtitle:"卡片三",goods:[]},{tabtitle:"卡片四",goods:[]}]};break;case 22:i.content={layout:1,layout1_style:1,modulePadding:5,hasImgMargin:1,Uwidth:390,pheight:70,fontSize:"12",dataset:[{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"}]};break;case 23:i.content={layout:1,layout1_style:2,modulePadding:5,hasImgMargin:1,Uwidth:390,pheight:70,fontSize:"12",is_stick:1,is_checked:0,dataset:[{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"},{linkType:0,link:"#",showtitle:"导航名称",titleBackgroundColor:"transparent",titleColor:"#000",pic:"/Public/images/diy/waitupload.png"}]};break;case 25:i.content={title:"附近商家",dataset:[{link:"/Shop/index",pic:"/PublicMob/images/mob/51access_store01.png",stores_name:"杭州市爱琴海西餐厅",goods:"爱琴海炭烧咖啡",iphone:"18812345678",phone:"0760-88780011",adress:"杭州市文三路17号"},{link:"/Shop/index",pic:"/PublicMob/images/mob/51access_store02.png",stores_name:"杭州市西窗咖啡馆",goods:"色拉套餐",iphone:"18812345678",phone:"0760-88782102",adress:"杭州市文三路与丰潭路交叉口"},{link:"/Shop/index",pic:"/PublicMob/images/mob/51access_store03.png",stores_name:"彼岸花开时尚花店",goods:"西城广场二楼",iphone:"18812345678",phone:"0760-88780113",adress:"杭州市文三路西城广场二楼"}],modulePadding:5};break;case 26:i.content={modulePadding:0};break;case 27:i.content={showName:1,titleLine:0,goodslist:[],goodstyle:1,titleColor:"#ff5a00",modulePadding:5,levelPadding:0,priceBold:1};break;case"coupon_pack":i.content={modulePadding:0,price:0,title:"请选择",coupon_number:0,couponid:0};break;case 28:i.content={goodslist:[],modulePadding:5}}HYD.DIY.add(i,!0,e,n)}),_QV_="%e6%9d%ad%e5%b7%9e%e5%90%af%e5%8d%9a%e7%a7%91%e6%8a%80%e6%9c%89%e9%99%90%e5%85%ac%e5%8f%b8%e7%89%88%e6%9d%83%e6%89%80%e6%9c%892018%2f02%2f02+0%3a00",$("#diy-phone .drag").sortable({revert:!0,placeholder:"drag-highlight",update:function(t,e){HYD.DIY.repositionCtrl(e.item,$(".diy-ctrl-item[data-origin='item']"))}}).disableSelection(),$(".j-pagetitle").click(function(){$(".diy-ctrl-item[data-origin='pagetitle']").show().siblings(".diy-ctrl-item[data-origin='item']").hide()}),$(".j-pagetitle-ipt").change(function(){$(".j-pagetitle").text($(this).val())}),function(){var t=$(".content-right").width();t<=1200?$(".diy-actions").css({right:"20px",bottom:0,width:t-20}):$(".diy-actions").width($(".content-right").width()-20)}()});